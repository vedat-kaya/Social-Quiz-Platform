{% extends "layout.html" %}

{% block title %}Profil: {{ user.username }} | SorSana{% endblock %}

{% block body %}

<div class="container mt-4">

    <div class="row justify-content-center mb-5">
        <div class="col-md-8">
            <div class="card shadow-lg" style="background-color: var(--card-bg); border: 1px solid var(--border-color); border-radius: 20px;">
                <div class="card-body text-center p-5">
                    
                    <div style="position: relative; display: inline-block;">
                        <img src="{{ url_for('static', filename='uploads/profile_pics/' + user.profile_pic_url) }}"
                             class="shadow"
                             style="width: 130px; height: 130px; border-radius: 50%; border: 4px solid var(--primary-color); object-fit: cover;">
                    </div>

                    <h2 class="mt-3 font-weight-bold" style="color: var(--text-color);">{{ user.username }}</h2>
                    <p class="mb-4" style="color: var(--text-muted);">{{ user.name }}</p>

                    <div class="d-flex justify-content-center mt-4 pt-4" style="border-top: 1px solid var(--border-color);">
                        
                        <div class="px-4 border-right" style="border-color: var(--border-color) !important;">
                            <h3 class="mb-0 font-weight-bold" style="color: var(--primary-color);">{{ quizzes|length }}</h3>
                            <small class="text-muted">Quiz</small>
                        </div>
                        
                        <div class="px-4 border-right" style="border-color: var(--border-color) !important;">
                            <h3 class="mb-0 font-weight-bold" style="color: #198754;">{{ user.total_views }}</h3>
                            <small class="text-muted">İzlenme</small>
                        </div>
                        
                        <div class="px-4">
                            <h3 class="mb-0 font-weight-bold" style="color: #dc3545;">{{ user.total_likes }}</h3>
                            <small class="text-muted">Beğeni</small>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>

    <h4 class="mb-4 pb-2 font-weight-bold" style="color: var(--text-color); border-bottom: 2px solid var(--border-color);">
        <i class="fa-solid fa-layer-group text-primary"></i> {{ user.username }} Tarafından Paylaşılanlar
    </h4>

    <div class="row">
        {% if quizzes %}
            {% for quiz in quizzes %}
            <div class="col-6 col-md-4 col-lg-3 mb-4"> <div class="quiz-card h-100">
                    
                    <div class="quiz-card-img-wrapper">
                        <a href="{{ url_for('quiz_detail', quiz_id=quiz.quiz_id) }}">
                            <img src="{{ url_for('static', filename='uploads/quiz_covers/' + quiz.cover_image_url) }}" class="quiz-card-img">
                        </a>
                        <span class="quiz-info-badge">{{ quiz.category }}</span>
                    </div>

                    <div class="card-body d-flex flex-column" style="min-height: 160px;">
                        
                        <h6 class="card-title font-weight-bold mb-2">
                            <a href="{{ url_for('quiz_detail', quiz_id=quiz.quiz_id) }}" style="color: var(--text-color); text-decoration: none;">
                                {{ quiz.title }}
                            </a>
                        </h6>

                        <div class="d-flex justify-content-between align-items-center mt-auto pt-3" style="border-top: 1px solid var(--border-color);">
                            <small class="text-muted">
                                <i class="fa-solid fa-eye"></i> {{ quiz.views }}
                            </small>

                            <a href="{{ url_for('quiz_detail', quiz_id=quiz.quiz_id) }}" class="btn btn-outline-primary btn-sm" style="border-radius: 20px; font-size: 0.8rem;">
                                İncele
                            </a>
                        </div>
                    </div>
                </div>

            </div>
            {% endfor %}
        {% else %}
            <div class="col-12 text-center mt-5">
                <i class="fa-solid fa-box-open fa-4x mb-3" style="color: var(--text-muted); opacity: 0.5;"></i>
                <h5 style="color: var(--text-color);">Bu kullanıcı henüz hiç quiz paylaşmamış.</h5>
            </div>
        {% endif %}
    </div>

</div>

{% endblock %}