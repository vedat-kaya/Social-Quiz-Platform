{% extends "layout.html" %}

{% block title %}Koleksiyonum | SorSana{% endblock %}

{% block head %}
<style>
    /* --- COLLECTION LIBRARY STİLİ --- */
    
    .library-header {
        display: flex;
        align-items: center;
        margin-bottom: 30px;
        padding-bottom: 20px;
        border-bottom: 1px solid var(--border-color);
    }
    .library-title {
        font-weight: 800;
        color: var(--text-color);
        margin: 0;
        font-size: 1.8rem;
    }
    
    /* Kütüphane Kartı */
    .library-card {
        background-color: var(--card-bg);
        border: 1px solid var(--border-color);
        border-radius: 20px;
        overflow: hidden;
        height: 100%;
        transition: transform 0.3s, box-shadow 0.3s;
        display: flex;
        flex-direction: column;
        position: relative;
    }
    
    .library-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 30px rgba(0,0,0,0.2);
        border-color: var(--primary-color);
    }

    /* Resim Alanı */
    .lib-img-wrapper {
        position: relative;
        height: 160px;
        overflow: hidden;
    }
    .lib-img {
        width: 100%; height: 100%;
        object-fit: cover;
        transition: transform 0.5s ease;
    }
    .library-card:hover .lib-img { transform: scale(1.1); }

    /* Kategori Rozeti */
    .lib-category {
        position: absolute;
        top: 10px; right: 10px;
        background: rgba(0, 0, 0, 0.7);
        backdrop-filter: blur(4px);
        color: white;
        padding: 4px 10px;
        border-radius: 50px;
        font-size: 0.7rem;
        font-weight: 700;
        text-transform: uppercase;
    }

    /* Kart İçeriği */
    .lib-body {
        padding: 20px;
        flex-grow: 1;
        display: flex;
        flex-direction: column;
    }

    .lib-title {
        font-weight: 800;
        color: var(--text-color);
        font-size: 1.05rem;
        margin-bottom: 5px;
        line-height: 1.3;
        text-decoration: none;
        display: -webkit-box;
        -webkit-line-clamp: 2; /* 2 satırdan fazlasını kes */
        -webkit-box-orient: vertical;
        overflow: hidden;
    }
    .lib-title:hover { color: var(--primary-color); text-decoration: none; }

    .lib-author {
        font-size: 0.85rem;
        color: var(--text-muted);
        margin-bottom: 15px;
        display: flex; align-items: center;
    }
    .lib-author i { margin-right: 5px; color: var(--accent-color); opacity: 0.7; }

    /* Alt İstatistikler */
    .lib-stats {
        margin-top: auto;
        display: flex;
        align-items: center;
        font-size: 0.8rem;
        color: var(--text-muted);
        margin-bottom: 15px;
    }
    .lib-stats span { margin-right: 15px; display: flex; align-items: center; }
    .lib-stats i { margin-right: 4px; }

    /* Butonlar */
    .lib-actions {
        display: flex;
        gap: 10px;
    }

    .btn-play {
        flex: 1;
        background-color: var(--primary-color);
        color: white;
        border: none;
        border-radius: 12px;
        padding: 8px;
        font-weight: 700;
        font-size: 0.9rem;
        transition: all 0.2s;
        text-align: center;
        text-decoration: none;
    }
    .btn-play:hover {
        background-color: #e06b00;
        color: white;
        text-decoration: none;
        transform: translateY(-2px);
    }

    .btn-remove {
        width: 38px; height: 38px;
        border-radius: 12px;
        border: 1px solid var(--border-color);
        background: transparent;
        color: var(--text-muted);
        display: flex; align-items: center; justify-content: center;
        transition: all 0.2s;
    }
    .btn-remove:hover {
        background-color: #dc3545;
        border-color: #dc3545;
        color: white;
    }

</style>
{% endblock %}

{% block body %}

<div class="container mt-4 mb-5">
    
    <div class="library-header">
        <h1 class="library-title">
            <i class="fa-solid fa-bookmark text-warning mr-2"></i> Koleksiyonum
        </h1>
    </div>

    {% if quizzes %}
        <div class="row">
            {% for quiz in quizzes %}
            <div class="col-6 col-md-4 col-lg-3 mb-4"> <div class="library-card">
                    
                    <div class="lib-img-wrapper">
                        <span class="lib-category">{{ quiz.category }}</span>
                        <a href="{{ url_for('quiz_detail', quiz_id=quiz.quiz_id) }}">
                            <img src="{{ url_for('static', filename='uploads/quiz_covers/' + quiz.cover_image_url) }}" class="lib-img">
                        </a>
                    </div>

                    <div class="lib-body">
                        
                        <a href="{{ url_for('quiz_detail', quiz_id=quiz.quiz_id) }}" class="lib-title" title="{{ quiz.title }}">
                            {{ quiz.title }}
                        </a>

                        <div class="lib-author">
                            <i class="fa-solid fa-user-circle"></i> {{ quiz.author_name }}
                        </div>

                        <div class="lib-stats">
                            <span title="Görüntülenme"><i class="fa-solid fa-eye text-info"></i> {{ quiz.views }}</span>
                            <span title="Beğeni"><i class="fa-solid fa-heart text-danger"></i> {{ quiz.likes }}</span>
                        </div>

                        <div class="lib-actions">
                            <a href="{{ url_for('quiz_detail', quiz_id=quiz.quiz_id) }}" class="btn-play" style="color: #ffffff !important;">
                            <i class="fa-solid fa-play mr-1"></i> Oyna
                            </a>
                            
                            <a href="{{ url_for('save_quiz', quiz_id=quiz.quiz_id) }}" class="btn-remove" title="Koleksiyondan Çıkar">
                                <i class="fa-solid fa-bookmark"></i> <i class="fa-solid fa-minus" style="font-size: 0.7rem; position: absolute;"></i>
                            </a>
                        </div>

                    </div>
                </div>

            </div>
            {% endfor %}
        </div>
    {% else %}
        
        <div class="col-12">
            <div class="text-center py-5" style="background-color: var(--card-bg); border-radius: 20px; border: 2px dashed var(--border-color);">
                <div style="width: 80px; height: 80px; background: rgba(255, 193, 7, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px auto;">
                    <i class="fa-regular fa-bookmark fa-3x" style="color: #ffc107;"></i>
                </div>
                
                <h3 style="color: var(--text-color); font-weight: 800;">Kütüphanen Boş</h3>
                <p class="text-muted mb-4">Henüz hiçbir quizi kaydetmedin. Beğendiğin içerikleri buraya ekleyerek kendine özel bir arşiv oluştur.</p>
                
                <a href="/" class="btn btn-outline-warning px-5 py-2 shadow-sm" style="border-radius: 50px; font-weight: 700; border-width: 2px;">
                    <i class="fa-regular fa-compass mr-2"></i> KEŞFETE ÇIK
                </a>
            </div>
        </div>

    {% endif %}

</div>

{% endblock %}